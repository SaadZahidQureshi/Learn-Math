<html>
  <head>
    <title>JavaScript Donut Chart</title>
    <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-pie.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>

    <style type="text/css">      
      html, body, #container { 
        width: 100%; height: 100%; margin: 0; padding: 0; 
      } 
    </style>
  </head>
  <body>  
    <div id="container"></div>
    <script>
      var myDoughnutChart = new Chart(ctx, {
        type: 'doughnut',
        data: data,
        options: {
          plugins: {
            doughnutlabel: {
              labels: [
                {
                  text: 'The title',
                  font: {
                    size: '60'
                  }
                },
                {
                  text: getTotal,
                  font: {
                    size: '50'
                  },
                  color: 'grey'
                },
                {
                  text: '$100.000',
                  font: {
                    size: '30'
                  },
                  color: 'red'
                },
                {
                  text: '95%',
                  font: {
                    size: '45'
                  },
                color: 'green'
                }
              ]
            }
          }		
        }
      });
      
      var getTotal = function(myDoughnutChart) {
        var sum = myDoughnutChart.config.data.datasets[0].data.reduce((a, b) => a + b, 0);
        return `Total: ${sum}`;
      }
    </script>
  </body>
</html>






// Doughnut chart config
const doughnutConfig = {
  type: "doughnut",
  data: doughnutData,
  options: {
    maintainAspectRatio: false,
    plugins:{
      legend:{
        labels:{
          generateLabels: (chart)=>{
            console.log(chart)
            console.log(chart.data.datasets[0].backgroundColor)

            return chart.data.datasets.map((dataset)=>({
              text: dataset.labels,

              fillStyle:dataset.backgroundColor,
              fillStroke: dataset.backgroundColor,
              fontColor: dataset.backgroundColor
            }))
          }
        }
      }
    },
  }
  // plugins: [textCenter]
};




const doughnutConfig = {
  type: "doughnut",
  data: doughnutData,
  options: {
    plugins: {
      legend: {
        labels: {
          font: {
            size: 20,
            weight: 700,
            color: 'red'
          },
          boxWidth: 0,
        },
        display: true, // Hide the default legend
        position: 'bottom',
        // align: "end"
      },
      title: {
        display: false,
        text: "",
        align: "start",
      },
    },
    cutoutPercentage: 40,
    maintainAspectRatio: false,
  },

  plugins: [textCenter]
};
